<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Updatable Charts (4 of 4)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="chart.js"></script>
    <style>
        div {
            padding: 20px 0 0 10px;
        }
    </style>
</head>
<body>
    <div id="updatableChart"></div>
    <script>
        // This script tag is analagous to Angular's compile function return. 
        // The chart.js is the content above the return.

        var dataSet = [];
        var highTemperatures = dataSet[0] = [77, 71, 82, 87, 84, 78, 80, 84, 86, 72, 71, 68, 75, 73, 80, 85, 86, 80];
        var lowTemperatures = dataSet[1] = highTemperatures.map(function(d) { return d - Math.random() * 30});
        var milesRun = dataSet[2] = [2, 5, 4, 3, 1, 2, 1];
        var fillColors = ['coral', 'steelblue', 'teal'];

        // Function definition
        var updatableChart = barChart().width(800).height(450).data(highTemperatures);

        // Need to .call a function to activate d3
        d3.select('#updatableChart')
            .call(updatableChart);

        // Auto-update intervals or use a watch in Angular? 
        var i = 1;
        window.setInterval(function() {
            // Updates data
            updatableChart.data(dataSet[i]);
            // Updates colors
            updatableChart.fillColor(fillColors[i]);
            i = (i+1) % 3 ;
        }, 2500);

    </script>
</body>
</html>
